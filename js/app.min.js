(()=>{"use strict";let e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};let t=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t))},r=(e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let r=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=r+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t)}},o=(e,o=500)=>e.hidden?r(e,o):t(e,o),n=!0,l=(e=500)=>{let t=document.querySelector("body");if(n){let r=document.querySelectorAll("._lp");setTimeout((()=>{for(let e=0;e<r.length;e++){r[e].style.paddingRight="0px"}t.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),n=!1,setTimeout((function(){n=!0}),e)}},i=(e=500)=>{let t=document.querySelector("body");if(n){let r=document.querySelectorAll("._lp");for(let e=0;e<r.length;e++){r[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}t.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),n=!1,setTimeout((function(){n=!0}),e)}};let s={getErrors(e){let t=0,r=e.querySelectorAll("*[data-required]");return r.length&&r.forEach((e=>{null!==e.offsetParent&&(t+=this.validateInput(e))})),t},validateInput(e){let t=0;return"email"===e.dataset.required?(e=e.value.replace(" ",""),this.emailTest(e)?(this.addError(e),t++):this.removeError(e)):("checkbox"!==e.type||e.checked)&&e.value?this.removeError(e):(this.addError(e),t++),t},addError(e){e.classList.add("_error"),e.parentElement.classList.add("_error");let t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t),e.hasAttribute("data-error")&&e.getAttribute("data-error")&&e.parentElement.insertAdjacentHTML("beforeend",'<div class="form__error">'+e.getAttribute("data-error")+"</div>")},removeError(e){e.classList.remove("_error"),e.parentElement.classList.remove("_error"),e.parentElement.querySelector(".form__error")&&e.parentElement.removeChild(e.parentElement.querySelector(".form__error"))},formClean(e){let t=e.querySelectorAll("input,textarea");for(let e=0;e<t.length;e++){const r=t[e];r.parentElement.classList.remove("_focus"),r.classList.remove("_focus"),r.value=r.dataset.placeholder}let r=e.querySelectorAll(".checkbox__input");if(r.length>0)for(let e=0;e<r.length;e++){r[e].checked=!1}let o=e.querySelectorAll("select");if(o.length>0)for(let e=0;e<o.length;e++){const t=o[e],r=t.getAttribute("data-default");t.value=r,select_item(t)}},emailTest:e=>!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)};!function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),e.any()&&document.documentElement.classList.add("touch"),window.addEventListener("load",(function(){setTimeout((function(){document.documentElement.classList.add("loaded")}),0)})),function(){let e=document.querySelector(".icon-menu");e&&e.addEventListener("click",(function(e){n&&(((e=500)=>{document.documentElement.classList.contains("lock")?l(e):i(e)})(),document.documentElement.classList.toggle("menu-open"))}))}(),function(){const e=document.querySelectorAll("[data-spollers]");if(e.length>0){const r=Array.from(e).filter((function(e,t,r){return!e.dataset.spollers.split(",")[0]}));r.length>0&&l(r);const n=Array.from(e).filter((function(e,t,r){return e.dataset.spollers.split(",")[0]}));if(n.length>0){const c=[];n.forEach((e=>{const t={},r=e.dataset.spollers.split(",");t.value=r[0],t.type=r[1]?r[1].trim():"max",t.item=e,c.push(t)}));let d=c.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));d=d.filter((function(e,t,r){return r.indexOf(e)===t})),d.forEach((e=>{const t=e.split(","),r=t[1],o=t[2],n=window.matchMedia(t[0]),i=c.filter((function(e){if(e.value===r&&e.type===o)return!0}));n.addEventListener("change",(function(){l(i,n)})),l(i,n)}))}function l(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),i(e),e.addEventListener("click",s)):(e.classList.remove("_init"),i(e,!1),e.removeEventListener("click",s))}))}function i(e,t=!0){const r=e.querySelectorAll("[data-spoller]");r.length>0&&r.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)}))}function s(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const r=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),n=r.closest("[data-spollers]"),l=!!n.hasAttribute("data-one-spoller");n.querySelectorAll("._slide").length||(l&&!r.classList.contains("_active")&&a(n),r.classList.toggle("_active"),o(r.nextElementSibling,500)),e.preventDefault()}}function a(e){const r=e.querySelector("[data-spoller]._active");r&&(r.classList.remove("_active"),t(r.nextElementSibling,500))}}}(),function(e){const t=document.forms;if(t.length)for(const e of t)e.addEventListener("submit",r);async function r(t){const r=t.target;if(0===(e?s.getErrors(r):0)){const e=r.getAttribute("data-message");if(r.hasAttribute("data-ajax")){t.preventDefault();const o=r.getAttribute("action")?r.getAttribute("action").trim():"#",n=r.getAttribute("method")?r.getAttribute("method").trim():"GET",l=new FormData(r);r.classList.add("_sending");const i=await fetch(o,{method:n,body:l});if(i.ok){await i.json();r.classList.remove("_sending"),e&&popupItem.open(`#${e}`),s.formClean(r)}else alert("Ошибка"),r.classList.remove("_sending")}r.hasAttribute("data-test")&&(t.preventDefault(),e&&popupItem.open(`#${e}`),s.formClean(r))}else{const e=r.querySelector("._error");e&&r.hasAttribute("data-goto-error")&&gotoBlock(e,1e3,50),t.preventDefault()}}}(!0),function(){let e=document.getElementsByTagName("select");function r(e){const r=document.querySelectorAll(".select");if(!e.target.closest(".select")&&!e.target.classList.contains("_option"))for(let e=0;e<r.length;e++){const o=r[e],n=o.querySelector(".select__options");o.classList.remove("_active"),t(n,100)}}function n(e){const r=e.parentElement,n=e.getAttribute("class"),i=e.querySelector("option:checked");e.setAttribute("data-default",i.value),e.style.display="none",r.insertAdjacentHTML("beforeend",'<div class="select select_'+n+'"></div>'),e.parentElement.querySelector(".select").appendChild(e),function(e){const r=e.parentElement,n=r.querySelector(".select__item"),i=e.querySelectorAll("option"),s=e.querySelector("option:checked").text,a=e.getAttribute("data-type");n&&n.remove();let c="";c="input"==a?'<div class="select__value icon-select-arrow"><input autocomplete="off" type="text" name="form[]" value="'+s+'" data-error="Ошибка" data-value="'+s+'" class="select__input"></div>':'<div class="select__value icon-select-arrow"><span>'+s+"</span></div>";r.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+c+'</div><div hidden class="select__options">'+function(e){if(e){let t="";for(let r=0;r<e.length;r++){const o=e[r],n=o.value;if(""!=n){t=t+'<div data-value="'+n+'" class="select__option">'+o.innerHTML+"</div>"}}return t}}(i)+"</div></div></div>"),function(e,r){const n=r.querySelector(".select__item"),i=r.querySelector(".select__title"),s=r.querySelector(".select__options"),a=r.querySelectorAll(".select__option"),c=e.getAttribute("data-type"),d=e.getAttribute("data-placeholder"),u=r.querySelector(".select__input");function p(){let t,o=r.querySelectorAll(".select__option"),n=e.querySelectorAll("option"),l=[],i=[];for(let e=0;e<n.length;e++){n[e].removeAttribute("selected")}for(let t=0;t<o.length;t++){const r=o[t],n=e.querySelector('option[value="'+r.dataset.value+'"]');if(r.classList.contains("_selected")){const e=r.innerHTML;l.push(e),i.push(r.dataset.value),n.setAttribute("selected","selected")}}l.length?t=l.join(", "):(t=d,e.querySelector('option[value=""]')&&e.querySelector('option[value=""]').setAttribute("selected","selected")),r.querySelector(".select__value").innerHTML="<span>"+t+"</span>"}function m(e){if(!e){let e=document.querySelectorAll(".select");for(let r=0;r<e.length;r++){const o=e[r],l=o.querySelector(".select__options");o!=n.closest(".select")&&(o.classList.remove("_active"),t(l,100))}o(s,100),r.classList.toggle("_active")}}i.addEventListener("click",(function(e){m()}));for(let t=0;t<a.length;t++){const o=a[t],n=o.getAttribute("data-value"),i=o.innerHTML;"input"==c?u.addEventListener("keyup",l):o.getAttribute("data-value")!=e.value||e.hasAttribute("multiple")||(o.style.display="none"),o.addEventListener("click",(function(){for(let e=0;e<a.length;e++){a[e].style.display="block"}let t;"input"==c?(u.value=i,e.value=n):e.hasAttribute("multiple")?(o.classList.toggle("_selected"),p()):(r.querySelector(".select__value").innerHTML="<span>"+i+"</span>",e.value=n,o.style.display="none"),e.hasAttribute("multiple")&&(t="multiple"),m(t)}))}}(e,r)}(e)}function l(e){e.target.closest(".select ").querySelector(".select__options");let t=e.target.closest(".select ").querySelectorAll(".select__option"),r=e.target.value.toUpperCase();for(let e=0;e<t.length;e++){let o=t[e];(o.textContent||o.innerText).toUpperCase().indexOf(r)>-1?o.style.display="":o.style.display="none"}}e.length>0&&function(){for(let t=0;t<e.length;t++){n(e[t])}document.addEventListener("click",(function(e){r(e)})),document.addEventListener("keydown",(function(e){"Escape"===e.code&&r(e)}))}()}()})();